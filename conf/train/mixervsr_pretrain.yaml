# reproducibility
seed_index: 0
deterministic: False

trainer:
  devices: 2
  accelerator: gpu
  precision: bf16-mixed
  max_epochs: 2
  accumulate_grad_batches: 1
  num_sanity_val_steps: 2
  gradient_clip_val: 10.0
  deterministic: ${train.deterministic}
  strategy: ddp

restore:
  ckpt_or_run_path: null

monitor:
  metric: 'loss/val'
  mode: 'min'

callbacks:
  - _target_: pytorch_lightning.callbacks.EarlyStopping
    patience: 500
    verbose: False
    monitor: ${train.monitor.metric}
    mode: ${train.monitor.mode}

  - _target_: pytorch_lightning.callbacks.ModelCheckpoint
    save_top_k: 1
    verbose: False
    monitor: ${train.monitor.metric}
    mode: ${train.monitor.mode}
    save_last: True

logger:
  _target_: pytorch_lightning.loggers.WandbLogger
  project: ${core.project_name}
  save_dir: ${oc.env:LOGGING_DIR}
  tags: ${core.tags}